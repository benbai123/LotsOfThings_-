# 整體工作概況

## 今年是怎麼規劃和運行

* 這部份主要由 min 主導，我自已這邊協助後端系統的部份

## 個人在這份工作時間是怎麼安排自己

工作上分別有幾種不同的類型，以下分別說明

### 簡單資料存取 API 類

* 舉例：

    > 需要一個取得 OO 資料的 API

    > 需要一個建立 XX 資料的 API

    > 需要一個修改 YY 資料的 API

* 狀況概述：

    > 通常不太需要思考設計，很直觀的進行開發。

    > 比較會遇到的問題是新舊 api 之間的規格落差

* 時間花費：一個 API 快則 20 分鐘內，較慢也多在一小時之內

* 時間佔比概述

    * 資料庫格式確認 10%

    * 程式撰寫 30%

    * 實際測試與修正 50%

        > 經常包含與舊版的比對，調整欄位名稱或關聯資料等

    * 工作項目記錄與 API 資料更新 10%

### 較單純流程的 API 類

* 舉例：

    > 取得 email 驗證信

    > 驗證並建立帳號

    > 驗證並登入

* 狀況概述：

    > 會需要先進行設計，諸如流程怎麼跑，需要哪些 table 或欄位

    > 如有必要，也會需要研究新工具，如驗證的 token 如何生成與編碼等

* 時間花費：一個 API 快則一小時內，較慢也多在半天之內

* 時間佔比概述

    * 資料庫格式確認 3%

    * 流程規劃設計與技術工具研究 30%

    * 程式撰寫 30%

    * 實際測試與修正 35%

    * 工作項目記錄與 API 資料更新 2%

### 較複雜流程的 API 類

* 舉例：

    > 借還車 API

    > bill 計算費用 API

* 狀況概述：

    > 流程跨度大，有較多不同可能的情況

    > 計算項目多也較複雜

* 時間花費：一個 API 快則半天內，較慢也多在 3~5 天之內

* 時間佔比概述

    * 資料庫格式確認 25%

    * 程式撰寫 25%

    * 實際測試與修正 50%

    * 工作項目記錄與 API 資料更新 < 1%

### 新功能研發類

* 舉例：

    > 維運後台與報表

    > 方案訂閱

* 狀況概述：

    > 會需要先進行設計，諸如流程怎麼跑，需要哪些 table 或欄位

    > 如有必要，也會需要研究新工具，如資料如何記錄，如合匯整計算

    > 資料量大時則需要對效能做改善，如快取的項目與時間規劃等

    > 對使用的工具如 DynamoDB 研讀官方文件與多篇教學，調整為適用的狀況

* 時間花費：依功能的範圍與複雜度不同，數週到數月不等

* 時間佔比概述

    * 資料庫格式確認 < 1%

    * 流程規劃設計與技術工具研究 25%

    * 匯整文件資料，調整效能 25%

    * 程式撰寫 25%

    * 實際測試與修正 25%

    * 工作項目記錄與 API 資料更新 < 1%

### 新工具流程導入類

* 舉例：

    > Omni 測試 Server

    > ngrok 開放本地連線工具

    > cloudflare 快取與跳轉

    > jest 單元測試與整合測試

* 狀況概述：

    > 主要在學習如何使用，以及如何與現行項目整合

* 時間花費：快則一兩個小時，較多的可能分多次累計數週

* 時間佔比概述

    * 學習與研讀文件 20%

    * 工具實測 20%

    * 實際使用及整合 60%

### 問題排查類

* 舉例：

    > 無法上傳圖片

    > 結帳金額錯誤

    > 方案抵用時間超扣

* 狀況概述：

    > 主要在確認狀況及檢查資料與程式和各系統的狀況

* 時間花費：快則一兩個小時，較慢也多在一週內

* 時間佔比概述

    * 確認狀況細節 40%

    * 確認資料內容及程式邏輯和各系統的狀況 60%


## 你的貢獻是什麼

### 團隊中的角色

* 技術支持

    * 一個功能的實作方式

    * 可以使用的工具

    * 資料內容的設計

    * 問題可能的排查方向

* 經驗分享

    * 如何構思複雜的流程或功能

    > 分散在多次短時間的思考，較容易有靈感

    > 想的時後放輕鬆，比較容易想得較全面

    > 重覆多順幾次

    > 小調整也要做較大範圍相關聯部份的複盤

### 負責完成的任務

* loopback api 以 nestjs 重寫

* 租借計費問題修正

    > 直接依邏輯重新寫過

    > 由原本經常各種計算錯誤，數個月無法排除，重寫後基本無費用計算問題

* 改善服務費用 (with min)

    * 導入 cloudflare 快取

    * 調整 api 與 aws S3 bucket

    > 近一年會員數增為 4 倍車數增為 3 倍，且多增加了方案排程、車機重定位排程、車機依電量上下架排程、電子圍籬功能與維運後台排程與報表，但 aws 費用較去年 12 月更低

* 改善效能

    * 資料庫加 index，調整程式實作，使用 cloudflare 快取等

    > 多項操作由數分鐘改善到數秒內，取大量 Log API、借還車、電量上下架排程、車機重定位排程等

* 維運小工具

    > 電子圍籬取範圍經緯度座標工具

    > 車機過去租借路徑重播

    > 租借中車機路線即時監看

* 建立 omni server 測試機制

    > 由原本直接上 staging 測試影響實際營運，改為可建立測試伺服器獨立實際測試

* 自動測試流程導入

* 電子圍籬 （重新製作）

    > 更即時 : 原本一分鐘一次，調整為即時處理

    > 更精確 : 原本僅能處理四邊形，調整為任意多邊形

    > 更省 : 原本一個月上萬，調整後約 30 以內 (以車數及資料傳輸量估計)

* 新版註冊登入流程

    > 解決原本 email 及手機流程衝突問題

* 方案訂閱系統設計與功能開發

* 維運後台系統設計與功能開發

    > 每日 分鐘數 * 車數 * 站數 資料統計與計算

    > 總 DynamoDB 費用壓在 5 USD 以內

    > 使用壓縮、規劃快取機制、設計資料記錄與計算流程

* 客服後台
    
    > 停權功能

    > 退款與開發票功能實作

* 更詳細的項目可到 [asana 頁面](https://app.asana.com/0/1201952895602344/board) 檢視 Done 區段內的項目

## 目前的能力到什麼程度

### 強項

* 技術能力

    * 系統設計

    * 系統架構規劃

    * 後端程式開發

    * 效能改善

    * 問題排查

### 弱項

* 對人口頭溝通

    * 會想比較多，聽 -> 理解 -> 思考 -> 構築描述 -> 回應 的速度與節奏較慢

    * 感謝 min 與 Clark 🙏

## 對未來的規劃是什麼

* 希望自己持續進步，並能傳承知識與經驗
